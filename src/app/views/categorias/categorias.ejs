

<!--INTERFAZ VALIDACION -->

<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VALIDACION OI</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

    <style>
      /* posiciona la imagen en la esquina superior izquierda sin alterar el flujo */
      #logoPic{
        position: absolute;
        top: 8px;
        left: 120px;
        width: 140px; /* aumentado desde 70px */
        height: auto;
        z-index: 1000;
        pointer-events: none; /* evita que capture clicks si sobrepone */
      }
      /* opcional: ajustar navbar para evitar solapamiento en dispositivos muy pequeños */
      @media (max-width: 420px) {
        #logoPic { width: 60px; top: 6px; left: 6px; }
      }
    </style>

</head>

<body>
    
    <nav class="navbar navbar-dark bg-dark">
        <!-- imagen servida desde /images/pic01.png -->
        <img id="logoPic" src="/images/pic01.png" alt="logo">
        <a href="#" class="navbar-brand mx-auto">PERSPECTIVAS ECONOMICAS 2026</a>
    </nav>

    <div class="container">
        
        <% if (typeof mensaje !== 'undefined' && mensaje) { %>
            <div class="alert alert-<%= tipoMensaje || 'success' %> mt-3"><%= mensaje %></div>
        <% } %>

        <div class="row">
            <div class="col-md-6 mt-4 text-center">
                <table class="table table-striped">
                    
                    <tr>
                        <th>NumLista</th>
                        <th>ApelliNom</th>
                        <th>Cedula</th>
                        <th>Asiento</th>
                        <th>Empresa</th>
                        <th>Codigo</th>
                        
                    </tr>
                    
                    <% for(var i = 0; i < registro.length; i++) { %>
                        <tr>
                            <td><%= registro[i].numlis %></td>
                            <td><%= registro[i].apenom %></td>
                            <td><%= registro[i].ced %></td>
                            <td><%= registro[i].asiento %></td>
                            <td><%= registro[i].empresa %></td>
                            <td><%= registro[i].codigo %></td>
                        </tr>
                    <% } %>
                    
                    
                </table>
            </div>
            
             
            <div class="col-md-6 mt-4 card">
                <form action="/validacion" method="post" class="card-body">
                    <h3 class="card-title">VALIDAR ENTRADA</h3>

                    <div class="form-group">
                        <!-- autocompleta con el codigo buscado; queda deshabilitado hasta que encontrado === true -->
                        <input type="text" name="codval" class="form-control" placeholder="Codigo de validacion" value="<%= codigoBuscado || '' %>" <%= encontrado ? '' : 'disabled' %> >
                    </div>

                    <input type="submit" value="Validar" class="btn btn-primary mt-2" <%= encontrado ? '' : 'disabled' %> >
                </form>
            <div>
            
            
            
            <style>
                .pave{
                    padding: 10px;
                }
            </style>    
            <div class="col-md-6 mt-4 card pave">
                
                <form action="/busqueda" method="post" class="card-body">
                    <h3 class="card-title">ENTRADA</h3>
                    <div class="principal">
                        <!-- mantener el valor buscado también en el input de búsqueda -->
                        <input type="text" id="validarinput" name="codigo" class="form-imprimir" placeholder="Ingrese el codigo de entrada" value="<%= codigoBuscado || '' %>">
                    </div>

                    <input type="submit" value="Buscar" class="btn btn-primary mt-2">
                </form>

                

            </div>

        </div>

    </div>

    <script>
  // Asegura foco en el input #validarinput al cargar la página
  (function() {
    function focusInput() {
      const el = document.getElementById('validarinput');
      if (!el) return;
      try { el.focus(); } catch(e){}
      // para algunos navegadores/plantillas, asegurar foco con pequeño retardo
      setTimeout(() => {
        try { el.focus(); el.select && el.select(); } catch(e){}
      }, 50);
    }
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      focusInput();
    } else {
      document.addEventListener('DOMContentLoaded', focusInput);
    }
  })();
</script>

</body>
</html>